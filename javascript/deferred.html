<!DOCTYPE html>
<html>
<head lang="ko">
    <meta charset="UTF-8">
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <title></title>
</head>
<body>

    <script>

        function Promise() {
            this.jobs = [];
            this.cache = null;
        }

        Promise.prototype.then = function(callback) {
            this.jobs.push(callback);
            return this;
        };

        Promise.prototype.resolve = function(data) {
            this.jobs.forEach(function(f) {
                f.apply(data);
            });
            return this;
        };


        function asyncJob() {
            var promise = new Promise(),
                rand = Math.random() * 10000;
            setTimeout(function() {
                this.cache = rand;
                promise.resolve(this.cache);
            }, rand);

            return promise;
        }

        function afterJob1() {
            console.log("End!");
        }

        function afterJob2() {
            console.log("End!");
        }



        asyncJob().then(afterJob1).then(afterJob2);
//
//
//        function C() {}
//
//        new C();
//
//        var empty = {}
//        var ret = C.apply(empty, arguments);
//
//        empty.__proto__ = C.prototype;
//
//        return typeof ret === 'object' ? ret : empty;
//



    </script>

</body>
</html>