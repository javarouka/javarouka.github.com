<!DOCTYPE html>
<html>
<head lang="ko">

    <meta charset="UTF-8">
    <title>History Object</title>

    <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet" media="all">

</head>
<body>

    <div class="container">
        <header>
            <h1>JavaScript History Object</h1>
            <nav class="image-picker">
                <ul class="nav nav-pills">
                    <li role="presentation"><a href="iu.jpg">아이유</a></li>
                    <li role="presentation"><a href="aoa.png">AOA</a></li>
                    <li role="presentation"><a href="exid.jpg">EXID</a></li>
                </ul>
            </nav>
        </header>
        <section class="render-area">

        </section>
    </div>


    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.min.js"></script>
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
    <script type="text/javascript" src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="bsNet/bsNet.0.2.js"></script>
    <script type="text/javascript">

        (function initialize($, WF) {

            "use strict";

            var el = {
                "imagePicker": $(".image-picker"),
                "renderArea": $(".render-area")
            };

            function loadContent(title, query) {
                var def = $.Deferred();
                history.pushState({
                    title: title,
                    url: query
                }, title, query);
                def.resolve(query);
                return def.promise();
            }

            function renderImage(data) {
                el.renderArea.html("<img src='" + data + "' style='width: 60%;'>")
            }

            function initialize() {

                el.imagePicker.on("click", "a[href]", function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    loadContent(e.target.innerHTML, e.target.href).done(renderImage);
                });

                $(window).bind("popstate", function(evt) {
                    var state = evt.originalEvent.state;
                    if(!state || !state.url) return;
                    renderImage(state.url);
                });

                WF.load({
                    custom: {
                        families: ['Nanum Gothic'],
                        urls: ['http://fonts.googleapis.com/earlyaccess/nanumgothic.css']
                    }
                });
            }

            initialize();

        })(jQuery, WebFont);


    </script>

</body>
</html>